axis.ticks.length = unit(.05, "cm"),
plot.title = element_text(size = fsize+4, family = font),
strip.text.x = element_text(size = fsize, family = font),
axis.text.x = element_text(size = fsize, family = font),
axis.text.y = element_text(size = fsize, family = font),
axis.title.x = element_text(size = fsize, family = font),
axis.title.y = element_text(size = fsize, family = font)) ## basic plot
## p + facet_wrap(~ Country, ncol=4, scales="free") ## arrange in grid for portrait
p + facet_wrap(~ Sector, ncol=7, scales=scale) ## arrange in grid (six columns)
grid.text("Source: enalytica based on Energy Information Administration, Manufacturing Energy Consumption Survey; Federal Reserve, Industrial Production and Capacity Utilization - G.17",
vjust=50, gp = gpar(fontfamily=font, fontsize = fsize))
dev.off()
font <- "Source Sans Pro" ## set font for graph
fsize <- 6 ## set font size for graph
scale <- "free"
dir.create("./figures", showWarnings = FALSE)
png(file = "./figures/IPI by Sector.png", width = 10.66, height = 6, units = "in", res = 600)
p <- ggplot(dat[!is.na(dat$value), ], aes(Date, value)) +
geom_line(colour="#36CC66", size = .6) +
labs(x = "") +
labs(y = "2012=100") +
ggtitle('United States: Industrial Production Index by Sector sorted by energy intensity (most energy-intensive industries first)') +
theme_bw() +
theme(plot.title = element_text(size = fsize, family = font, face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major = element_line(color="grey", linetype = "dotted"),
strip.background = element_blank(),
panel.border = element_blank(),
axis.ticks.length = unit(.05, "cm"),
plot.title = element_text(size = fsize+4, family = font),
strip.text.x = element_text(size = fsize, family = font),
axis.text.x = element_text(size = fsize, family = font),
axis.text.y = element_text(size = fsize, family = font),
axis.title.x = element_text(size = fsize, family = font),
axis.title.y = element_text(size = fsize, family = font)) ## basic plot
## p + facet_wrap(~ Country, ncol=4, scales="free") ## arrange in grid for portrait
p + facet_wrap(~ Sector, ncol=7, scales=scale) ## arrange in grid (six columns)
grid.text("Source: enalytica based on Energy Information Administration, Manufacturing Energy Consumption Survey; Federal Reserve, Industrial Production and Capacity Utilization - G.17",
vjust=52, gp = gpar(fontfamily=font, fontsize = fsize))
dev.off()
font <- "Source Sans Pro" ## set font for graph
fsize <- 6 ## set font size for graph
scale <- "free"
dir.create("./figures", showWarnings = FALSE)
png(file = "./figures/IPI by Sector.png", width = 10.66, height = 6, units = "in", res = 600)
p <- ggplot(dat[!is.na(dat$value), ], aes(Date, value)) +
geom_line(colour="#36CC66", size = .6) +
labs(x = "") +
labs(y = "2012=100") +
ggtitle('United States: Industrial Production Index by Sector sorted by energy intensity (most energy-intensive industries first)') +
theme_bw() +
theme(plot.title = element_text(size = fsize, family = font, face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major = element_line(color="grey", linetype = "dotted"),
strip.background = element_blank(),
panel.border = element_blank(),
axis.ticks.length = unit(.05, "cm"),
plot.title = element_text(size = fsize+4, family = font),
strip.text.x = element_text(size = fsize, family = font),
axis.text.x = element_text(size = fsize, family = font),
axis.text.y = element_text(size = fsize, family = font),
axis.title.x = element_text(size = fsize, family = font),
axis.title.y = element_text(size = fsize, family = font)) ## basic plot
## p + facet_wrap(~ Country, ncol=4, scales="free") ## arrange in grid for portrait
p + facet_wrap(~ Sector, ncol=7, scales=scale) ## arrange in grid (six columns)
grid.text("Source: enalytica based on Energy Information Administration, Manufacturing Energy Consumption Survey; Federal Reserve, Industrial Production and Capacity Utilization - G.17",
vjust=53, gp = gpar(fontfamily=font, fontsize = fsize))
dev.off()
library(reshape2) ## melt
library(plyr)
library(dplyr) ## filter
library(tidyr) ## separate
library(stringi)
library(ggplot2)
library(grid)
## URL <- "http://www.federalreserve.gov/releases/g17/ipdisk/ip_sa.txt"
## download.file (URL, destfile = "./ip_sa.txt")
dat <- read.fwf(file = "ip_sa.txt", widths = c(16,4,13, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10),
strip.white = T, stringsAsFactors=F)
dat <- dat[- grep(":", dat$V1),]
months <- seq (from=1, to=12, by=1)
colnames(dat) <- c("Code", "Year", months); rm(months)
dat <- melt(dat, id.vars = c("Code", "Year"))
dat <- transform(dat, Date = as.Date(paste(Year, variable, 01, sep = "-")))
dat <- transform(dat, value = as.numeric(value))
dat$Code <- gsub("\"", "", dat$Code)
dat <- dat[,c(5,1,4)]
dat <- filter(dat, nchar(Code) == 4)
dat <- filter(dat, !grepl('GMFD|GMFN|GMFO|G211|G212|G213', Code))
codenames <- read.table(
header = TRUE,
sep = ";",
stringsAsFactors = FALSE, text =
"Code;Sector;Energy
G311;Food;4.3
G312;Beverage and tobacco;1.1
G313;Textile mills;7.1
G314;Textile product mills;2.4
G315;Apparel;0.9
G316;Leather & allied product;1.0
G321;Wood product;16.3
G322;Paper;26.4
G323;Printing & related activities; 1.9
G324;Petroleum & coal products;35.1
G325;Chemical;7.3
G326;Plastics & rubber products;3.2
G327;Nonmetallic mineral product;15.7
G331;Primary metal;18.3
G332;Fabricated metal product;1.9
G333;Machinery;0.9
G334;Computer and electronic product;0.7
G335;Electrical eq, appl, and comp;1.7
G336;Transportation equipment;1.0
G337;Furniture and related product;1.1
G339;Miscellaneous;0.9")
codenames$Code <- stri_trim_left(codenames$Code)
dat <- merge(dat, codenames, by.dat = "Code", by.codenames = "Code")
dat$Sector <- reorder(dat$Sector, -dat$Energy, FUN=last)
font <- "Source Sans Pro" ## set font for graph
fsize <- 6 ## set font size for graph
scale <- "free"
dir.create("./figures", showWarnings = FALSE)
png(file = "./figures/IPI by Sector.png", width = 10.66, height = 6, units = "in", res = 600)
p <- ggplot(dat[!is.na(dat$value), ], aes(Date, value)) +
geom_line(colour="#36CC66", size = .6) +
labs(x = "") +
labs(y = "2012=100") +
ggtitle('United States: Industrial Production Index sorted by sectoral energy intensity (most energy-intensive industries first)') +
theme_bw() +
theme(plot.title = element_text(size = fsize, family = font, face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major = element_line(color="grey", linetype = "dotted"),
strip.background = element_blank(),
panel.border = element_blank(),
axis.ticks.length = unit(.05, "cm"),
plot.title = element_text(size = fsize+4, family = font),
strip.text.x = element_text(size = fsize, family = font),
axis.text.x = element_text(size = fsize, family = font),
axis.text.y = element_text(size = fsize, family = font),
axis.title.x = element_text(size = fsize, family = font),
axis.title.y = element_text(size = fsize, family = font)) ## basic plot
## p + facet_wrap(~ Country, ncol=4, scales="free") ## arrange in grid for portrait
p + facet_wrap(~ Sector, ncol=7, scales=scale) ## arrange in grid (six columns)
grid.text("Source: enalytica based on Energy Information Administration, Manufacturing Energy Consumption Survey; Federal Reserve, Industrial Production and Capacity Utilization - G.17",
vjust=53, gp = gpar(fontfamily=font, fontsize = fsize))
dev.off()
library(reshape2) ## melt
library(plyr)
library(dplyr) ## filter
library(tidyr) ## separate
library(stringi)
library(ggplot2)
library(grid)
## URL <- "http://www.federalreserve.gov/releases/g17/ipdisk/ip_sa.txt"
## download.file (URL, destfile = "./ip_sa.txt")
dat <- read.fwf(file = "ip_sa.txt", widths = c(16,4,13, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10),
strip.white = T, stringsAsFactors=F)
dat <- dat[- grep(":", dat$V1),]
months <- seq (from=1, to=12, by=1)
colnames(dat) <- c("Code", "Year", months); rm(months)
dat <- melt(dat, id.vars = c("Code", "Year"))
dat <- transform(dat, Date = as.Date(paste(Year, variable, 01, sep = "-")))
dat <- transform(dat, value = as.numeric(value))
dat$Code <- gsub("\"", "", dat$Code)
dat <- dat[,c(5,1,4)]
dat <- filter(dat, nchar(Code) == 4)
dat <- filter(dat, !grepl('GMFD|GMFN|GMFO|G211|G212|G213', Code))
codenames <- read.table(
header = TRUE,
sep = ";",
stringsAsFactors = FALSE, text =
"Code;Sector;Energy
G311;Food;4.3
G312;Beverage and tobacco products;1.1
G313;Textile mills;7.1
G314;Textile product mills;2.4
G315;Apparel;0.9
G316;Leather and allied products;1.0
G321;Wood products;16.3
G322;Paper;26.4
G323;Printing and support; 1.9
G324;Petroleum and coal products;35.1
G325;Chemicals;7.3
G326;Plastics and rubber products;3.2
G327;Nonmetallic mineral products;15.7
G331;Primary metals;18.3
G332;Fabricated metal products;1.9
G333;Machinery;0.9
G334;Computer and electronic products;0.7
G335;Electrical eq, appl, and comp;1.7
G336;Transportation equipment;1.0
G337;Furniture and related products;1.1
G339;Miscellaneous;0.9")
codenames$Code <- stri_trim_left(codenames$Code)
dat <- merge(dat, codenames, by.dat = "Code", by.codenames = "Code")
dat$Sector <- reorder(dat$Sector, -dat$Energy, FUN=last)
font <- "Source Sans Pro" ## set font for graph
fsize <- 6 ## set font size for graph
scale <- "free"
dir.create("./figures", showWarnings = FALSE)
png(file = "./figures/IPI by Sector.png", width = 10.66, height = 6, units = "in", res = 600)
p <- ggplot(dat[!is.na(dat$value), ], aes(Date, value)) +
geom_line(colour="#36CC66", size = .6) +
labs(x = "") +
labs(y = "2012=100") +
ggtitle('United States: Industrial Production Index sorted by sectoral energy intensity (most energy-intensive industries first)') +
theme_bw() +
theme(plot.title = element_text(size = fsize, family = font, face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major = element_line(color="grey", linetype = "dotted"),
strip.background = element_blank(),
panel.border = element_blank(),
axis.ticks.length = unit(.05, "cm"),
plot.title = element_text(size = fsize+4, family = font),
strip.text.x = element_text(size = fsize, family = font),
axis.text.x = element_text(size = fsize, family = font),
axis.text.y = element_text(size = fsize, family = font),
axis.title.x = element_text(size = fsize, family = font),
axis.title.y = element_text(size = fsize, family = font)) ## basic plot
## p + facet_wrap(~ Country, ncol=4, scales="free") ## arrange in grid for portrait
p + facet_wrap(~ Sector, ncol=7, scales=scale) ## arrange in grid (six columns)
grid.text("Source: enalytica based on Energy Information Administration, Manufacturing Energy Consumption Survey; Federal Reserve, Industrial Production and Capacity Utilization - G.17",
vjust=53, gp = gpar(fontfamily=font, fontsize = fsize))
dev.off()
font <- "Source Sans Pro" ## set font for graph
fsize <- 6 ## set font size for graph
scale <- "free"
dir.create("./figures", showWarnings = FALSE)
png(file = "./figures/IPI by Sector.png", width = 10.66, height = 6, units = "in", res = 600)
p <- ggplot(dat[!is.na(dat$value), ], aes(Date, value)) +
geom_line(colour="#36CC66", size = .6) +
labs(x = "") +
labs(y = "2012=100") +
ggtitle('United States: Industrial Production Index sorted by sectoral energy intensity (most energy-intensive industries first)') +
theme_bw() +
theme(plot.title = element_text(size = fsize, family = font, face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major = element_line(color="grey", linetype = "dotted"),
strip.background = element_blank(),
panel.border = element_blank(),
axis.ticks.length = unit(.05, "cm"),
plot.title = element_text(size = fsize+4, family = font),
strip.text.x = element_text(size = fsize, family = font),
axis.text.x = element_text(size = fsize, family = font),
axis.text.y = element_text(size = fsize, family = font),
axis.title.x = element_text(size = fsize, family = font),
axis.title.y = element_text(size = fsize, family = font)) ## basic plot
## p + facet_wrap(~ Country, ncol=4, scales="free") ## arrange in grid for portrait
p + facet_wrap(~ Sector, ncol=7, scales=scale) ## arrange in grid (six columns)
grid.text("Source: enalytica. Industrial production from Federal Reserve, Industrial Production and Capacity Utilization - G.17; Energy intensity from Energy Information Administration, Manufacturing Energy Consumption Survey",
vjust=53, gp = gpar(fontfamily=font, fontsize = fsize))
dev.off()
library(reshape2) ## melt
library(plyr)
library(dplyr) ## filter
library(tidyr) ## separate
library(stringi)
library(ggplot2)
library(grid)
## URL <- "http://www.federalreserve.gov/releases/g17/ipdisk/ip_sa.txt"
## download.file (URL, destfile = "./ip_sa.txt")
dat <- read.fwf(file = "ip_sa.txt", widths = c(16,4,13, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10),
strip.white = T, stringsAsFactors=F)
dat <- dat[- grep(":", dat$V1),]
months <- seq (from=1, to=12, by=1)
colnames(dat) <- c("Code", "Year", months); rm(months)
dat <- melt(dat, id.vars = c("Code", "Year"))
dat <- transform(dat, Date = as.Date(paste(Year, variable, 01, sep = "-")))
dat <- transform(dat, value = as.numeric(value))
dat$Code <- gsub("\"", "", dat$Code)
dat <- dat[,c(5,1,4)]
dat <- filter(dat, nchar(Code) == 4)
dat <- filter(dat, !grepl('GMFD|GMFN|GMFO|G211|G212|G213', Code))
codenames <- read.table(
header = TRUE,
sep = ";",
stringsAsFactors = FALSE, text =
"Code;Sector;Energy
G311;Food;4.3
G312;Beverage and tobacco products;1.1
G313;Textile mills;7.1
G314;Textile product mills;2.4
G315;Apparel;0.9
G316;Leather and allied products;1.0
G321;Wood products;16.3
G322;Paper;26.4
G323;Printing and support; 1.9
G324;Petroleum and coal products;35.1
G325;Chemicals;7.3
G326;Plastics and rubber products;3.2
G327;Nonmetallic mineral products;15.7
G331;Primary metals;18.3
G332;Fabricated metal products;1.9
G333;Machinery;0.9
G334;Computer and electronic products;0.7
G335;Electrical equipment, appliances, and components;1.7
G336;Transportation equipment;1.0
G337;Furniture and related products;1.1
G339;Miscellaneous;0.9")
codenames$Code <- stri_trim_left(codenames$Code)
dat <- merge(dat, codenames, by.dat = "Code", by.codenames = "Code")
dat$Sector <- reorder(dat$Sector, -dat$Energy, FUN=last)
font <- "Source Sans Pro" ## set font for graph
fsize <- 6 ## set font size for graph
scale <- "free"
dir.create("./figures", showWarnings = FALSE)
png(file = "./figures/IPI by Sector.png", width = 10.66, height = 6, units = "in", res = 600)
p <- ggplot(dat[!is.na(dat$value), ], aes(Date, value)) +
geom_line(colour="#36CC66", size = .6) +
labs(x = "") +
labs(y = "2012=100") +
ggtitle('United States: Industrial Production Index sorted by sectoral energy intensity (most energy-intensive industries first)') +
theme_bw() +
theme(plot.title = element_text(size = fsize, family = font, face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major = element_line(color="grey", linetype = "dotted"),
strip.background = element_blank(),
panel.border = element_blank(),
axis.ticks.length = unit(.05, "cm"),
plot.title = element_text(size = fsize+4, family = font),
strip.text.x = element_text(size = fsize, family = font),
axis.text.x = element_text(size = fsize, family = font),
axis.text.y = element_text(size = fsize, family = font),
axis.title.x = element_text(size = fsize, family = font),
axis.title.y = element_text(size = fsize, family = font)) ## basic plot
## p + facet_wrap(~ Country, ncol=4, scales="free") ## arrange in grid for portrait
p + facet_wrap(~ Sector, ncol=7, scales=scale) ## arrange in grid (six columns)
grid.text("Source: enalytica. Industrial production from Federal Reserve, Industrial Production and Capacity Utilization - G.17; Energy intensity from Energy Information Administration, Manufacturing Energy Consumption Survey",
vjust=53, gp = gpar(fontfamily=font, fontsize = fsize))
dev.off()
library(reshape2) ## melt
library(plyr)
library(dplyr) ## filter
library(tidyr) ## separate
library(stringi)
library(ggplot2)
library(grid)
## URL <- "http://www.federalreserve.gov/releases/g17/ipdisk/ip_sa.txt"
## download.file (URL, destfile = "./ip_sa.txt")
dat <- read.fwf(file = "ip_sa.txt", widths = c(16,4,13, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10),
strip.white = T, stringsAsFactors=F)
dat <- dat[- grep(":", dat$V1),]
months <- seq (from=1, to=12, by=1)
colnames(dat) <- c("Code", "Year", months); rm(months)
dat <- melt(dat, id.vars = c("Code", "Year"))
dat <- transform(dat, Date = as.Date(paste(Year, variable, 01, sep = "-")))
dat <- transform(dat, value = as.numeric(value))
dat$Code <- gsub("\"", "", dat$Code)
dat <- dat[,c(5,1,4)]
dat <- filter(dat, nchar(Code) == 4)
dat <- filter(dat, !grepl('GMFD|GMFN|GMFO|G211|G212|G213', Code))
codenames <- read.table(
header = TRUE,
sep = ";",
stringsAsFactors = FALSE, text =
"Code;Sector;Energy
G311;Food;4.3
G312;Beverage and tobacco products;1.1
G313;Textile mills;7.1
G314;Textile product mills;2.4
G315;Apparel;0.9
G316;Leather and allied products;1.0
G321;Wood products;16.3
G322;Paper;26.4
G323;Printing and support; 1.9
G324;Petroleum and coal products;35.1
G325;Chemicals;7.3
G326;Plastics and rubber products;3.2
G327;Nonmetallic mineral products;15.7
G331;Primary metals;18.3
G332;Fabricated metal products;1.9
G333;Machinery;0.9
G334;Computer and electronic products;0.7
G335;Electrical equipment;1.7
G336;Transportation equipment;1.0
G337;Furniture and related products;1.1
G339;Miscellaneous;0.9")
codenames$Code <- stri_trim_left(codenames$Code)
dat <- merge(dat, codenames, by.dat = "Code", by.codenames = "Code")
dat$Sector <- reorder(dat$Sector, -dat$Energy, FUN=last)
font <- "Source Sans Pro" ## set font for graph
fsize <- 6 ## set font size for graph
scale <- "free"
dir.create("./figures", showWarnings = FALSE)
png(file = "./figures/IPI by Sector.png", width = 10.66, height = 6, units = "in", res = 600)
p <- ggplot(dat[!is.na(dat$value), ], aes(Date, value)) +
geom_line(colour="#36CC66", size = .6) +
labs(x = "") +
labs(y = "2012=100") +
ggtitle('United States: Industrial Production Index sorted by sectoral energy intensity (most energy-intensive industries first)') +
theme_bw() +
theme(plot.title = element_text(size = fsize, family = font, face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major = element_line(color="grey", linetype = "dotted"),
strip.background = element_blank(),
panel.border = element_blank(),
axis.ticks.length = unit(.05, "cm"),
plot.title = element_text(size = fsize+4, family = font),
strip.text.x = element_text(size = fsize, family = font),
axis.text.x = element_text(size = fsize, family = font),
axis.text.y = element_text(size = fsize, family = font),
axis.title.x = element_text(size = fsize, family = font),
axis.title.y = element_text(size = fsize, family = font)) ## basic plot
## p + facet_wrap(~ Country, ncol=4, scales="free") ## arrange in grid for portrait
p + facet_wrap(~ Sector, ncol=7, scales=scale) ## arrange in grid (six columns)
grid.text("Source: enalytica. Industrial production from Federal Reserve, Industrial Production and Capacity Utilization - G.17; Energy intensity from Energy Information Administration, Manufacturing Energy Consumption Survey",
vjust=53, gp = gpar(fontfamily=font, fontsize = fsize))
dev.off()
library(reshape2) ## melt
library(plyr)
library(dplyr) ## filter
library(tidyr) ## separate
library(stringi)
library(ggplot2)
library(grid)
## URL <- "http://www.federalreserve.gov/releases/g17/ipdisk/ip_sa.txt"
## download.file (URL, destfile = "./ip_sa.txt")
dat <- read.fwf(file = "ip_sa.txt", widths = c(16,4,13, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10),
strip.white = T, stringsAsFactors=F)
dat <- dat[- grep(":", dat$V1),]
months <- seq (from=1, to=12, by=1)
colnames(dat) <- c("Code", "Year", months); rm(months)
dat <- melt(dat, id.vars = c("Code", "Year"))
dat <- transform(dat, Date = as.Date(paste(Year, variable, 01, sep = "-")))
dat <- transform(dat, value = as.numeric(value))
dat$Code <- gsub("\"", "", dat$Code)
dat <- dat[,c(5,1,4)]
dat <- filter(dat, nchar(Code) == 4)
dat <- filter(dat, !grepl('GMFD|GMFN|GMFO|G211|G212|G213', Code))
codenames <- read.table(
header = TRUE,
sep = ";",
stringsAsFactors = FALSE, text =
"Code;Sector;Energy
G311;Food;4.3
G312;Beverage and tobacco products;1.1
G313;Textile mills;7.1
G314;Textile product mills;2.4
G315;Apparel;0.9
G316;Leather and allied products;1.0
G321;Wood products;16.3
G322;Paper;26.4
G323;Printing and support; 1.9
G324;Petroleum and coal products;35.1
G325;Chemicals;7.3
G326;Plastics and rubber products;3.2
G327;Nonmetallic mineral products;15.7
G331;Primary metals;18.3
G332;Fabricated metal products;1.9
G333;Machinery;0.9
G334;Computer and electronic products;0.7
G335;Electrical equipment;1.7
G336;Transportation equipment;1.0
G337;Furniture and related products;1.1
G339;Miscellaneous;0.9")
codenames$Code <- stri_trim_left(codenames$Code)
dat <- merge(dat, codenames, by.dat = "Code", by.codenames = "Code")
dat$Sector <- reorder(dat$Sector, -dat$Energy, FUN=last)
font <- "Source Sans Pro" ## set font for graph
fsize <- 6 ## set font size for graph
scale <- "free"
dir.create("./figures", showWarnings = FALSE)
png(file = "./figures/IPI, ranked by sectoral energy intensity, 1986-2016.png", width = 10.66, height = 6, units = "in", res = 600)
p <- ggplot(dat[!is.na(dat$value), ], aes(Date, value)) +
geom_line(colour="#36CC66", size = .6) +
labs(x = "") +
labs(y = "2012=100") +
ggtitle('United States: Industrial Production Index sorted by sectoral energy intensity (most energy-intensive industries first)') +
theme_bw() +
theme(plot.title = element_text(size = fsize, family = font, face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major = element_line(color="grey", linetype = "dotted"),
strip.background = element_blank(),
panel.border = element_blank(),
axis.ticks.length = unit(.05, "cm"),
plot.title = element_text(size = fsize+4, family = font),
strip.text.x = element_text(size = fsize, family = font),
axis.text.x = element_text(size = fsize, family = font),
axis.text.y = element_text(size = fsize, family = font),
axis.title.x = element_text(size = fsize, family = font),
axis.title.y = element_text(size = fsize, family = font)) ## basic plot
## p + facet_wrap(~ Country, ncol=4, scales="free") ## arrange in grid for portrait
p + facet_wrap(~ Sector, ncol=7, scales=scale) ## arrange in grid (six columns)
grid.text("Source: enalytica. Industrial production from Federal Reserve, Industrial Production and Capacity Utilization - G.17; Energy intensity from Energy Information Administration, Manufacturing Energy Consumption Survey",
vjust=53, gp = gpar(fontfamily=font, fontsize = fsize))
dev.off()
# Import libraries ####
library(reshape) # melt
library(ggplot2) # ggplot2
library(tidyr) # spread
library(rworldmap) # load world map
library(grid) # grid.text
library(scales) # labels = comma
library(plotly)
library(rjson)
setwd("~/Dropbox/- Data Incubator/- Capstone/- Github/codeData")
# Read file ####
dat = read.csv('../cleandata/CO2database.csv', header = T)
df = dat[ dat$Unit == '1990=100',]
df = df[, c(1:3,7:8)]
df = df[df$Variable %in% c('CO2', 'TPES', 'GDP', 'CO2CAPITA', 'ENERGYCAPITA', 'GDPCAPITA'),]
df$Variable <- gsub('TPES',"ENERGY", df$Variable)
# df = spread(df, Variable, Value)
View(df)
View(df)
df = na.omit(df)
df = spread(df, Variable, Value)
for (i in unique(df$Country)) {
country = df [ df$Country == i, ]
fileN = paste0('../cleandata/countries/', i, '.csv')
write.csv(country, fileN, row.names = F)
}
